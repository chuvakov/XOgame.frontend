<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" />
		<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.bundle.min.js"></script>
		<link
			rel="stylesheet"
			href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css"
			integrity="sha512-KfkfwYDsLkIlwQp6LFnl8zNdLGxu9YAA1QvwINks4PhcElQSvqcyVLLD9aMhXd13uQjoXtEKNosOWaZqXgel0g=="
			crossorigin="anonymous"
			referrerpolicy="no-referrer"
		/>
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/css/toastr.min.css" />
		<title>XOgame</title>
		<link rel="shortcut icon" href="/img/logo.png" type="image/x-icon" />
		<script
			src="https://code.jquery.com/jquery-3.6.0.min.js"
			integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4="
			crossorigin="anonymous"
		></script>
		<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/js/toastr.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
		<script
			src="https://cdnjs.cloudflare.com/ajax/libs/microsoft-signalr/6.0.4/signalr.min.js"
			integrity="sha512-grldNBeqlywsN9Niz0kz/qqcl3BY931AHO3ghT0yLMKvnu2YBC1iTnAQigzu3DS3Ve2NorQ1TXmKNCirj41GKQ=="
			crossorigin="anonymous"
			referrerpolicy="no-referrer"
		></script>
		<script src="/libs/sweetAlert/sweetalert2.all.min.js"></script>

		<!-- Наши скрипты -->
		<script src="/js/components/rooms.js" type="module"></script>
		<script src="/js/components/auth.js" type="module"></script>
		<script src="/js/components/game.js" type="module"></script>
		<script src="/js/components/settings.js" type="module"></script>
		<script src="/js/index.js" type="module"></script>

		<!-- Наши стили -->
		<link rel="stylesheet" href="/css/index.css" />
	</head>
	<body>
		<div class="container">
			<header class="mt-3 d-flex justify-content-end">
				<span data-bs-toggle="tooltip" data-bs-placement="left" title="Настройки">
					<button id="Settings" class="btn btn-secondary d-none">
						<i class="fa-solid fa-screwdriver-wrench"></i>
					</button>
				</span>
			</header>
			<div
				class="d-flex justify-content-center align-items-center mt-3"
				style="font-size: 20px; font-weight: bold"
			>
				<img src="/img/logo.png" alt="logo" style="height: 60px; width: 60px" />game
			</div>
			<div class="card" style="margin-top: 50px">
				<div class="card-body">
					<div class="row">
						<div class="col-6">
							<div class="row">
								<div class="col-8">
									<div>
										<label for="exampleFormControlInput1" class="form-label">Ник</label>
										<input
											id="NicknameInput"
											type="text"
											class="form-control"
											id="exampleFormControlInput1"
											placeholder="Введите ник"
										/>
									</div>
								</div>
								<div class="col-4 d-flex align-items-end">
									<button id="Auth" class="btn btn-primary">Авторизоваться</button>
									<button id="Logout" class="btn btn-primary d-none">Выйти</button>
								</div>
							</div>
						</div>

						<div class="col-6 d-flex align-items-end justify-content-end flex-column">
							<button
								class="btn btn-primary d-none"
								data-bs-toggle="modal"
								data-bs-target="#CreateRoomModal"
							>
								Создать комнату
							</button>
						</div>
					</div>

					<div class="row justify-content-end mt-3">
						<div class="col-6">
							<div class="input-group">
								<button class="btn btn-outline-secondary" type="button" id="SearchButton">
									<i class="fa-solid fa-magnifying-glass"></i>
								</button>
								<input
									id="SearchRoom"
									type="text"
									class="form-control"
									placeholder="Название комнаты"
									aria-label="Example text with button addon"
									aria-describedby="button-addon1"
								/>
							</div>
						</div>
					</div>

					<div class="row mt-2">
						<div class="col-12">
							<div class="card">
								<div class="card-header d-flex justify-content-between align-items-center">
									Комнаты
									<i
										id="RefreshRooms"
										class="fa-solid fa-rotate"
										role="button"
										data-bs-toggle="tooltip"
										title="Обновить"
									></i>
								</div>
								<ul id="Rooms" class="list-group list-group-flush d-none"></ul>
								<div id="RoomsPlaceholder" class="text-center mt-2 mb-2">Нет созданных комнат!</div>
							</div>
						</div>
					</div>
				</div>
			</div>
			<footer class="d-flex justify-content-end mt-3">
				<span id="Version"></span>
			</footer>
		</div>

		<!-- Модальные окна -->
		<!-- Создание комнаты -->
		<div id="CreateRoomModal" class="modal" tabindex="-1">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						<h5 class="modal-title">Создание комнаты</h5>
						<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
					</div>
					<div class="modal-body">
						<div class="mb-3">
							<label for="exampleFormControlInput1" class="form-label">Название комнаты</label>
							<input id="RoomName" type="text" class="form-control" placeholder="Введите название" />
						</div>
						<div class="mb-3">
							<label for="exampleFormControlInput1" class="form-label">Пароль</label>
							<input
								id="RoomPassword"
								type="text"
								class="form-control"
								placeholder="Введите пароль"
								disabled
							/>
						</div>
						<div class="form-check form-switch">
							<input
								id="SwitchPassword"
								class="form-check-input"
								type="checkbox"
								role="switch"
								id="flexSwitchCheckDefault"
							/>
							<label class="form-check-label" for="flexSwitchCheckDefault">Установить пароль</label>
						</div>
					</div>
					<div class="modal-footer">
						<button id="CreateRoom" type="button" class="btn btn-primary">Создать</button>
					</div>
				</div>
			</div>
		</div>

		<!-- Окно подброса монетки -->
		<div id="CoinModal" class="modal" tabindex="-1">
			<div class="modal-dialog modal-dialog-centered">
				<div class="modal-content">
					<div class="modal-body d-flex justify-content-center align-items-center flex-column">
						<h3 class="text-center">Подбрасываем монетку</h3>
						<img id="CoinFlip" src="/img/flip-coin.gif" alt="" />
						<div id="CoinContent" class="coin-content d-none">
							<img id="CoinImg" class="coin-img" src="/img/win-coin.png" alt="" />
							<h4 id="CoinText">Вы ходите первым!</h4>
						</div>
					</div>
				</div>
			</div>
		</div>

		<!-- Модальное окно настроек -->
		<div id="SettingsModal" class="modal" tabindex="-1">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						<h5 class="modal-title">Настройки</h5>
						<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
					</div>
					<div class="modal-body settings">
						<div class="settings__item" style="width: 22rem">
							<div class="settings__header d-flex align-items-center justify-content-between">
								<h6 class="settings__title"><label for="SwitchSoundAll">Настройки профиля</label></h6>
							</div>

							<div class="card mt-3">
								<div class="avatar-upload">
									<div class="avatar-edit">
										<input type="file" id="imageUpload" accept=".png, .jpg, .jpeg" />
										<label for="imageUpload"></label>
									</div>
									<div class="avatar-preview">
										<img id="imagePreview" src="/img/player.png" />
										<div class="mt-3 text-center">Аватар</div>
									</div>
								</div>
							</div>
						</div>

						<div class="settings__item mt-sm-5" style="width: 22rem">
							<div class="settings__header d-flex align-items-center justify-content-between">
								<h6 class="settings__title"><label for="SwitchSoundAll">Звуковые эффекты</label></h6>
								<div class="form-check form-switch">
									<input class="form-check-input" type="checkbox" role="switch" id="SwitchSoundAll" />
								</div>
							</div>

							<div class="card mt-3">
								<ul class="list-group list-group-flush">
									<li class="list-group-item d-flex align-items-center justify-content-between">
										<label class="form-check-label" for="SwitchWin"
											>Звук результата игры "победа"</label
										>
										<div class="form-check form-switch">
											<input
												class="form-check-input soundSetting"
												type="checkbox"
												role="switch"
												id="SwitchWin"
											/>
										</div>
									</li>
									<li class="list-group-item d-flex align-items-center justify-content-between">
										<label class="form-check-label" for="SwitchLose"
											>Звук результата игры "поражение"</label
										>
										<div class="form-check form-switch">
											<input
												class="form-check-input soundSetting"
												type="checkbox"
												role="switch"
												id="SwitchLose"
											/>
										</div>
									</li>
									<li class="list-group-item d-flex align-items-center justify-content-between">
										<label class="form-check-label" for="SwitchDraw"
											>Звук результата игры "ничья"</label
										>
										<div class="form-check form-switch">
											<input
												class="form-check-input soundSetting"
												type="checkbox"
												role="switch"
												id="SwitchDraw"
											/>
										</div>
									</li>
									<li class="list-group-item d-flex align-items-center justify-content-between">
										<label class="form-check-label" for="SwitchStep">Звук хода во время игры</label>
										<div class="form-check form-switch">
											<input
												class="form-check-input soundSetting"
												type="checkbox"
												role="switch"
												id="SwitchStep"
											/>
										</div>
									</li>

									<li class="list-group-item d-flex align-items-center justify-content-between">
										<label class="form-check-label" for="SwitchStartGame">Звук начала игры</label>
										<div class="form-check form-switch">
											<input
												class="form-check-input soundSetting"
												type="checkbox"
												role="switch"
												id="SwitchStartGame"
											/>
										</div>
									</li>
								</ul>
							</div>
						</div>
					</div>
					<div class="modal-footer">
						<button id="SaveSettings" type="button" class="btn btn-primary">Сохранить изменения</button>
					</div>
				</div>
			</div>
		</div>

		<!-- Окно комнаты + игры -->
		<div id="RoomModal" class="modal" tabindex="-1">
			<div class="modal-dialog modal-fullscreen">
				<div class="modal-content">
					<div class="modal-header">
						<h5 class="modal-title">Комната: <span id="RoomNameTitle">название</span></h5>
						<button
							type="button"
							class="btn-close exit-room"
							data-bs-dismiss="modal"
							aria-label="Close"
						></button>
					</div>
					<div class="modal-body">
						<div id="Room" class="row room">
							<div class="col-12">
								<div class="card">
									<div class="card-header">Игроки</div>
									<ul id="Rooms" class="list-group list-group-flush">
										<li
											id="firstPlayer"
											class="list-group-item d-flex align-items-center justify-content-between"
										>
											<div class="d-flex align-items-center">
												<i class="fa-solid fa-circle-user default-avatar"></i>
												<img class="avatar d-none" src="" alt="" />
												<span class="playerName">Игрок1</span>
												<div
													class="crown d-none"
													data-bs-toggle="tooltip"
													title="Администратор комнаты"
												>
													<i class="fa-solid fa-crown"></i>
												</div>
											</div>

											<div class="d-flex align-items-center">
												<span class="badge rounded-pill text-bg-danger playerStatus"
													>Не готов</span
												>
											</div>
										</li>
										<li
											id="secondPlayer"
											class="list-group-item d-flex align-items-center justify-content-between d-none"
										>
											<div class="d-flex align-items-center">
												<i class="fa-solid fa-circle-user default-avatar"></i>
												<img class="avatar d-none" src="" alt="" />
												<span class="playerName">Игрок2</span>
												<div
													class="crown d-none"
													data-bs-toggle="tooltip"
													title="Администратор комнаты"
												>
													<i class="fa-solid fa-crown"></i>
												</div>
											</div>

											<div class="d-flex align-items-center">
												<span class="badge rounded-pill text-bg-danger playerStatus"
													>Не готов</span
												>
											</div>
										</li>
									</ul>
								</div>
							</div>
						</div>

						<div id="Game" class="row d-none game">
							<div class="col-12">
								<div class="d-flex justify-content-between align-items-center player">
									<div>
										<div id="PlayerTurn"></div>
									</div>
									<div class="d-flex flex-column align-items-center">
										<img id="OpponentAvatar" class="avatar" src="/img/opponent.png" alt="" />
										<span id="OpponentNickname">Nick</span>
									</div>
								</div>
								<div id="Field" class="container-grid">
									<div class="box" style="border-left: 0; border-top: 0" data-number="1"></div>
									<div class="box" style="border-top: 0" data-number="2"></div>
									<div class="box" style="border-top: 0; border-right: 0" data-number="3"></div>
									<div class="box" style="border-left: 0" data-number="4"></div>
									<div class="box" data-number="5"></div>
									<div class="box" style="border-right: 0" data-number="6"></div>
									<div class="box" style="border-left: 0; border-bottom: 0" data-number="7"></div>
									<div class="box" style="border-bottom: 0" data-number="8"></div>
									<div class="box" style="border-right: 0; border-bottom: 0" data-number="9"></div>
								</div>
								<div class="d-flex player">
									<div class="d-flex flex-column align-items-center">
										<img id="PlayerAvatar" class="avatar" src="/img/player.png" alt="" />
										<span id="PlayerNickname">Nick</span>
									</div>
								</div>
							</div>
						</div>
					</div>
					<div id="RoomFooter" class="modal-footer d-flex justify-content-between">
						<button type="button" class="btn btn-danger exit-room" data-bs-dismiss="modal">
							Покинуть комнату
						</button>
						<div>
							<button id="Start" type="button" class="btn btn-primary d-none" disabled>
								Начать игру
							</button>
							<button id="ReadyBtn" type="button" class="btn btn-primary">Готов</button>
						</div>
					</div>
				</div>
			</div>
		</div>
	</body>
</html>
